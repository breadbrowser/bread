<!DOCTYPE html>
<html>
  <head>
    <title>AI Math Simple</title>
    <meta name="description" content="A simple guide to understanding AI math and calculating VRAM needed for fine-tuning LLMs.">
    <meta name="language" content="en">
  </head>
  <body>
    <h1>Transformers Math</h1>
    <p>hidden_size = intermediate_size * 0.25</p>
    <p>(still working on this one, don't use.) num_attention_heads = 64 / ( intermediate_size / 1024)</p>
    <p>intermediate_size = num_attention_heads * 128</p>
    <p>Usually people use multiple of 2 like 128, 256 and 512 for intermediate_size. Higher the intermediate_size the better the capturing of information but more the time required for training</p>

    <p style="padding: 2px; margin: 2px"></p>
    <h1>find 4-bit size of LLM (needs more testing, won't recommend)</h1>
    <p>((size of LLM in GB) / 8) * 4 = (8-bit model size in gb)</p>

    <p style="padding: 2px; margin: 2px"></p>
    <h1>find ram requirement for ggml LLM</h1>
    <p>(size of LLM in GB)* 2.5 = (ram needed to run llm in gb)</p>
    <p>usually you times by a number between 2-4</p>
    <p>2.5 is a good number to find the ram needed for a ggml LLM</p>

    <p style="padding: 2px; margin: 2px"></p>
    <h1>find vram requirement for fine-tuning a transfomers model</h1>
    <p>(S * 4) * (E / 1024) = (gigs of vram needed to fine-tune the model with a batch size of 1)</p>
    <p>S=size of model in GB</p>
    <p>E=max_position_embeddings</p>
    
    <p style="padding: 2px; margin:2px"></p>
    <h1>math to find parameter count for model</h1>
    <p>(T * D)+(12 * N * D^2)= (parameter count for the ai model)</p>
    <p>T=vocab_size</p>
    <p>D=n_positions</p>
    <p>N=n_layer</p>
    <div style="display: flex">
     <p style="padding: 0px; margin: 0px">source for the parameter count math is </p>
     <a href="https://kipp.ly/transformer-param-count/" style="text-indent: 2px">kipp.ly/transformer-param-count</a>
     <p style="padding: 0px; margin: 0px; text-indent: 2px">or if that isn't up anymore then you can view it </p>
     <a href="https://breadbrowser.github.io/bread/site-back-backups/transformer-param-count-kipply/index.html" style="text-indent: 2px">here</a>
    </div>
  </body>
</html>
